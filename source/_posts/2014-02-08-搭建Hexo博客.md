---
title: 搭建Hexo博客
categories:
  - iOS开发
tags:
  - iOS开发
date: 2014-02-08 20:23:11
---
# 安装环境
　　安装git 和 Node.js。
## Node.js 安装的两种方法:
1. 点击前面链接直接下载安装即可
2. 通过终端命令行：
```objectivec
$ curl https://raw.github.com/creationix/nvm/master/install.sh | sh
```
之后重启终端，如果还找不到nvm命令可尝试重启电脑.
接着执行
```objectivec
$ nvm install 4
```
即可安装完成
以上两个条件已具备的话，即可开始安装hexo博客框架.
```objectivec
$ npm install -g hexo-cli
```
执行完成后hexo就安装成功了，第一步结束，环境配置完毕可以开始创建自己的博客了.

# github上创建仓库
+ github创建帐号
+ 创建仓库，名字前面部分可以随便起,后面部分统一为github.io ，其他的均不需设置。

# 博客的创建
## 初始化
```objectivec
cd /Desktop  
$ hexo init mrscorpion.github.io
```
桌面会生成一个文件夹,名为mrscorpion.github.io

## 基础配置
打开_config.yml文件进行基础配置（可以使用sublime或者atom来打开，都是很很强大的代码编辑器，可安装各种插件，前端开发必备）

title: ***   //博客名字
subtitle:  ***   //小标题(选填)
description:  ***        // 描述
author: ***     //名字
language: zh-Hans   //语言（此处为简体中文）
url:  //自己购买的域名网址（没有可不写）
theme：   //主题的名字
deploy:
type: git //使用git发布
repo: https://github.com/mrscorpion/mrscorpion.github.io.git // 刚刚创建的github仓库的地址

## 安装主题
博客要想炫酷漂亮，一款合适的主题必不可少，hexo本身就提供了50种主题 可以预览查看，选择一款自己喜欢的主题
点击图片即可预览，看到此主题的效果，点击蓝色主题名即可进入此主题的github仓库，一般主题作者都写有使用方法。
这里使用的是一款简约漂亮的主题，使用的人挺多的。之后就可以在mrscorpion.github.io/themes目录下看到nex（以下next均为主题名，路径中为主题文件夹名。使用的主题不同只要把next换成相应的名字即可）主题。这个主题有三种布局展示形式，可自行挑选主题的详细配置请看这里

## 创建博客文章与发布
在mrscorpion.github.io 目录下终端命令：
```objectivec
$ hexo new '文件名' //会在source/_posts创建一个文件名.md文件
```
这就可以使用markdown编辑器开始写自己的博客了（上面提到有工具）

```objectivec
---
title: 搭建Hexo博客 //博客标题
categories:
  - iOS开发 //分类
tags:
  - iOS开发 //标签
date: 2014-02-08 20:23:11 //创建时间
---
　　开始撰写文章
```

## 本地查看效果预览
```objectivec
$ hexo s
```
浏览器打开https://localhost:4000 即可查看效果

## 发布到 github：
```objectivec
$ hexo clean && hexo g && hexo d //发布到 github
```
发布到 github 后可以使用 [http://mrscorpion.github.io](http://mrscorpion.github.io) 访问自己博客

## 博客中插入图片和音乐
### 插入图片
主要有两种方法
+ 放在本地文件
首先在mrscorpion.github.io目录下确认
```
_config.yml 中有 post_asset_folder:true
```
在 hexo 目录，执行
```objectivec
$ npm install https://github.com/CodeFalling/hexo-asset-image --save
```
之后再使用 hexo new 'new' 创建新博客的时候，会在source/_posts里面创建.md文件的同时生成一个相同的名字的文件夹。把该文章中需要使用的图片放在该文件夹下即可。
使用的时候
```
![“图片描述”（可以不写）](/文件夹名/你的图片名字.JPG)
例如：
！[ ] (new/mrscorpion.png)
```
＋ 放在七牛上，需要先注册，上传图片生成链接，直接在文章中使用链接即可。［可以使用snip截屏，配合atom插件一键上传七牛］

### 插入音乐
以网易云音乐为例：
点击歌曲名字进入播放器页面，点击生成外链播放器；复制代码，直接粘贴到博文中即可。这样会显示一个网易的播放器（可以把其中的width=298 height=52 均改为0，即可隐藏外链播放器，变为播放背景音乐）
![caoyuan](http://ob6otnqbf.bkt.clouddn.com/af6b51545c8bdcb9e14683510136e22f.png)
![wlbfq](http://ob6otnqbf.bkt.clouddn.com/898994da90972b946c288c56cff688b9.png)
```
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="http://music.163.com/outchain/player?type=3&id=10002034&auto=1&height=66"></iframe>
```
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=0 height=0 src="http://music.163.com/outchain/player?type=3&id=10002034&auto=1&height=66"></iframe>

# 集成多说评论，分享
申请多说帐号,打开页面点击我要安装注册帐号
在themes/next目录下打开 _config.yml，设置
```objectivec
duoshuo_shortname:  nanshanyi //上面多说域名中填的内容
 需要分享的打开duoshuo_share: true 即可，支持分享到微博、QQ空间、微信
```
然后打开themes\landscape\layout_partial\article.ejs文件
把以下代码
```
<% if (!index && post.comments && config.disqus_shortname){ %>
 <section id="comments">
   <div id="disqus_thread">
     <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
   </div>
 </section>
 <% } %>
```
替换为
```
<% if (!index && post.comments && config.duoshuo_shortname){ %>
  <section id="comments">
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="<%= post.layout %>-<%= post.slug %>" data-title="<%= post.title %>" data-url="<%= page.permalink %>"></div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:'<%= config.duoshuo_shortname %>'};
      (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
         || document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
      </script>
    <!-- 多说公共JS代码 end -->
  </section>
  <% } %>
```

# 添加标签页
　　在mrscorpion.github.io文件目录下执行
```
$ hexo new page tags //会在mrscorpion.github.io/source下创建tags文件夹内部是一个index.md和index文件夹
```
修改mrscorpion.github.io/themes/next/_config.yml
```
menu:
  home: /      //主页
  #categories: /categories //分类
  archives: /archives   //归档
  tags: /tags   //标签（添加此行即可）
  about: /about   //关于
  #commonweal: /404.html
```
首页菜单就会有便签项，点击即可进入标签页。

# 添加本地搜索
安装 hexo-generator-search，在mrscorpion.github.io目录下执行以下命令：
```
$ npm install hexo-generator-search --save
```
在mrscorpion.github.io/themes/next/_config.yml添加
```
search:
      path: search.xml
      field: post
```
发布即可看到效果.

# 官方文档
更多关于hexo设置，请查看[官方文档](http://theme-next.iissnan.com/getting-started.html)。
![hexoRss](http://ob6otnqbf.bkt.clouddn.com/d4905f0b2088c028c47633c223ec7532.png)
